# Telegram Bot Project (bot_new)

Многофункциональный Telegram-бот на Python с использованием библиотеки `aiogram` 3.x.

## Возможности

* Приветствие пользователя и основное меню навигации.
* **Погода:**
    * Сохранение города пользователя.
    * Получение текущей погоды для сохраненного города (использует OpenWeatherMap API).
    * Отображение температуры (текущей и ощущаемой), влажности, давления, скорости/направления ветра, времени восхода/заката.
* **Курс валют:**
    * Получение актуальных курсов валют (USD, EUR, GBP, PLN) от Национального Банка Украины (НБУ).
* **Управление городом:**
    * Просмотр сохраненного города.
    * Изменение сохраненного города с проверкой корректности через API погоды.
* **Другое:**
    * Кнопка "Тревога" (функционал в разработке).

## Настройка и Запуск

1.  **Клонируйте репозиторий:**
    ```bash
    git clone <URL вашего репозитория>
    cd bot_new
    ```
2.  **Создайте и активируйте виртуальное окружение:**
    ```bash
    python -m venv venv
    # Windows
    venv\Scripts\activate
    # macOS/Linux
    source venv/bin/activate
    ```
3.  **Установите зависимости:**
    ```bash
    pip install -r requirements.txt
    ```
4.  **Создайте файл `.env`** в корневой папке проекта (`bot_new`) и добавьте в него ваши токены:
    ```dotenv
    # Токен вашего Telegram бота (получить у @BotFather)
    BOT_TOKEN=1234567890:ABCdefGhIJKlmNoPQRsTUVwXYz123456789

    # Ключ API от OpenWeatherMap ([https://openweathermap.org/api](https://openweathermap.org/api))
    WEATHER_API_KEY=a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6

    # Опционально: Переопределение имен файлов для данных
    # CITIES_FILE=my_cities.json
    # REMINDERS_FILE=my_reminders.json
    ```
5.  **Запустите бота:**
    ```bash
    python main.py
    ```

## Структура Проекта

* `main.py`: Точка входа, инициализация бота и диспетчера.
* `config.py`: Загрузка конфигурации (токены, пути).
* `utils.py`: Вспомогательные функции (работа с JSON, определение направления ветра).
* `keyboards.py`: Определение всех клавиатур бота.
* `states.py`: Определение состояний FSM (для изменения города).
* `common_handlers.py`: Обработчики общих команд (`/start`, "Назад в меню").
* `city_management.py`: Обработчики, связанные с управлением городом ("Мой город", "Изменить город", FSM).
* `weather.py`: Обработчики для получения погоды.
* `currency.py`: Обработчики для получения курсов валют.
* `other_handlers.py`: Обработчики для прочих кнопок ("Тревога").
* `cities.json`: Файл для хранения городов пользователей (создается автоматически).
* `reminders.json`: Файл для хранения данных напоминаний (функционал не реализован, создается автоматически).
* `requirements.txt`: Список зависимостей Python.
* `.env`: Файл с секретными токенами (необходимо создать вручную).
* `README.md`: Этот файл.